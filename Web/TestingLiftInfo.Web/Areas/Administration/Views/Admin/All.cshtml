@model TestingLiftInfo.Web.ViewModels.Administration.Admin.GetAllAdminViewModel
@inject Microsoft.Extensions.Configuration.IConfiguration Configuration

@{
    this.ViewData["Title"] = "Всички инспектори";
}

<h3>@this.ViewData["Title"]</h3>
<div class="row">
    <a class="btn btn-success btn-sm" style="float:right; margin:10px; margin-left:20px" onclick="showForm()">✙ Добави</a>
</div>

<div class="row">
    <div class="col-md-7">
        <table class="table table-dark border border-light" style="font-weight:500; width:380px">
            <thead>
                <tr>
                    <th class=" border border-light text-light" scope="col" style="text-align:center; width:30px">№</th>
                    <th class="border border-light text-light" scope="col" style="width:200px">Име</th>
                    <th class="border border-light text-light" scope="col" style="text-align:center; width:140px"><font size="3">Премахни инспектор</font></th>
            </thead>
            <tbody>
                @{var count = 1;}
                @foreach (var item in Model.Users)
                {
                    string color = "honeydew";

                    if (count % 2 != 0)
                    {
                        color = "honeydew";
                    }
                    else
                    {
                        color = "lightblue";
                    }

                    <tr class="text-dark border-light" style="background-color:@color">
                        <td class="border border-light" style="text-align:center">@count</td>
                        <td class="border border-light">@item.Name</td>
                        <td class="border border-light" style="text-align:center"> <a asp-area="Administration" asp-controller="Admin" asp-action="Delete" asp-route-id="@item.Id" class="btn btn-danger justify-content-md-center">Премахни</a></td>
                    </tr>

                    count++;
                }
            </tbody>
        </table>
    </div>
    <div class="col-md-4">
        <form asp-area="Administration" asp-controller="Admin" asp-action="AddAdmin" method="post" id="AddForm" style="display: none" onsubmit="return submitResult();">
            <div class="text-center" style="margin-top:100px">
                <div>
                    <label for="name" style="font-size:larger">E-mail на потребителя</label>
                </div>
                <div>
                    <input class="form-control-sm" asp-for="@Model.Add.Email" type="text" id="name" size="25" />
                </div>
                <input asp-for="@Model.Add.RecaptchaValue" type="hidden" id="RecaptchaValue" />
                <div>
                    <button type="submit" class="btn btn-success btn-sm m-2">✙ Добави</button>
                </div>
                <div>
                    <span asp-validation-for="@Model.Add.Email" class="text-danger"></span>
                </div>
            </div>
        </form>
    </div>
</div>

@section Scripts
{
    <script>
        function showForm() {
             $("#AddForm").show();
        }
    </script>

    <script>
        function submitResult() {
            if (confirm("Сигурни ли сте, че искате да добавите този потребител като инспектор в системата?") == false) {
                return false;
            } else {
                return true;
            }
        }
    </script>

    <script src="https://www.google.com/recaptcha/api.js?render=@this.Configuration["GoogleReCaptcha:Key"]"></script>
    <script>
        grecaptcha.ready(function () {
            grecaptcha.execute('@this.Configuration["GoogleReCaptcha:Key"]', { action: 'createInspector' }).then(function (token) {
                document.getElementById("RecaptchaValue").value = token;
            });
        });
    </script>
}